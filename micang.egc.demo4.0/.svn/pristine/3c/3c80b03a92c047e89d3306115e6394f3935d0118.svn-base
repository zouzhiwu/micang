package com.game.util;

import org.apache.commons.lang3.StringUtils;

import com.common.entity.Location;
import com.common.entity.Node;

public class GameUtil {
	/**
	 * 四舍五入，保留num位小数点
	 */
	public static float round(double f, int num) {
		double pow = Math.pow(10, num);
		return (float)(Math.round(f * pow) / pow);
	}
	
	public static float round2(double f) {
		return round(f, 2);
	}
	
	/**
	 * 两点的实际距离
	 */
	public static float distance(Location p1, Location p2) {
		if (p1.y == p2.y) {
			double d = Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.z - p1.z, 2));
			double distance = round(d, 2);
			return (float)distance;
		} else {
			return 9999;
		}
		
	}
	
	public static boolean isInCircle(Location p0, float r, Location p) {
		return r > distance(p0, p);
	}
	
	public static double angle(Location p1, Location p0, Location p2) {
		double angle1 = angle(p0, p1);
		double angle2 = angle(p0, p2);
		return Math.abs((angle1 - angle2) * (180 / Math.PI));
	}
	
	public static double angle(Location p1, Location p2) {
		return Math.atan2(p2.z - p1.z, p2.x - p1.x);
	}
	
	public static double angle(Node node1, Node node2) {
		return Math.atan2(node2.coord.y - node1.coord.y, node2.coord.x - node1.coord.x);
	}
	
	public static int[] string2Ints(String value) {
	    int[] intArr = new int[0];
	    if(StringUtils.isEmpty(value)){
	        intArr = new int[0];
	    }else{
	        String[] valueArr = value.split(",");
	        intArr = new int[valueArr.length];
	        for (int i = 0; i < valueArr.length; i++) {
	            intArr[i] = Integer.parseInt(valueArr[i]);
	        }
	    }
	    return intArr;
	}
	
}
